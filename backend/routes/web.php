<?php

use Illuminate\Support\Facades\Route;
use Illuminate\Support\Facades\Mail;
use App\Http\Controllers\ReservationController;

/*
|--------------------------------------------------------------------------
| Web Routes
|--------------------------------------------------------------------------
|
| ãƒ¡ãƒ¼ãƒ«å†…ã®æ¤œè¨¼ãƒªãƒ³ã‚¯ï¼ˆç½²åä»˜ãURLï¼‰ã‚’å‡¦ç†ã™ã‚‹ãƒ«ãƒ¼ãƒˆ
|
*/

// ðŸŸ¢ ç½²åä»˜ãURLã‚’å—ã‘å–ã£ã¦æ¤œè¨¼
Route::get('/verify/{reservation}', [ReservationController::class, 'verify'])
    ->name('reservations.verify')
    ->middleware('signed'); // â† ç½²åãƒã‚§ãƒƒã‚¯ï¼ˆæœŸé™ã‚‚URLå†…ã«åŸ‹ã‚è¾¼ã‚ã‚‹ï¼‰

    
/*
|--------------------------------------------------------------------------
| é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆç”¨ãƒ«ãƒ¼ãƒˆ
|--------------------------------------------------------------------------
|
| Render â†’ Gmail ã¸ãƒ¡ãƒ¼ãƒ«é€ä¿¡ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã®ãƒ«ãƒ¼ãƒˆã€‚
| å‹•ä½œç¢ºèªå¾Œã¯å‰Šé™¤ã—ã¦OKã€‚
|
*/

Route::get('/mail-test', function () {
    try {
        Mail::raw('Render ã‹ã‚‰ Gmail çµŒç”±ã§é€ä¿¡ãƒ†ã‚¹ãƒˆæˆåŠŸï¼', function ($m) {
            $m->to('enyukari.k.imamura@gmail.com') // â† ã“ã“ã‚’è‡ªåˆ†ã®Gmailã«ç½®ãæ›ãˆã¦ãã ã•ã„
              ->subject('Laravel SMTP ãƒ†ã‚¹ãƒˆãƒ¡ãƒ¼ãƒ«');
        });
        return 'âœ… ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã‚’å®Ÿè¡Œã—ã¾ã—ãŸã€‚Gmailã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚';
    } catch (\Throwable $e) {
        return 'âŒ é€ä¿¡ã‚¨ãƒ©ãƒ¼: ' . $e->getMessage();
    }
});

/*
|--------------------------------------------------------------------------
| ä»–ã®ãƒ†ã‚¹ãƒˆãƒ«ãƒ¼ãƒˆãƒ»ãƒšãƒ¼ã‚¸
|--------------------------------------------------------------------------
*/

// ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒšãƒ¼ã‚¸ï¼ˆé–‹ç™ºæ™‚ã®ã¿æ®‹ã™ãªã‚‰OKï¼‰
Route::get('/', function () {
    return view('welcome');
});

// ã‚‚ã—HomeControllerã‚’ä½¿ã£ã¦ã„ãªã„ãªã‚‰å‰Šé™¤ã—ã¦OK
// Route::get('/home', [HomeController::class, 'index'])->name('home');
